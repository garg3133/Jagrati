<!DOCTYPE html>
<html>
    <head>

         {% load static %}
         {% static "logo.png" as logo %}

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title> {% block title %}Jagrati | Students List{% endblock title%} </title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
        
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <!-- Font Awesome CSS -->
        <link rel="stylesheet" href="{% static 'vendor/css/fontawesome-all.min.css' %}">
        <!-- Students_list CSS-->
        <link rel="stylesheet" href="{% static 'css/students_list.css' %}" type="text/css">

    </head>
    <body>

        <!-- Navbar -->
        <nav class="navbar">
            <a class="navbar-brand" href="#">
                {% load static %}
                <img src="{{ logo }}" width="150" height="100" alt="">
            </a>
                <h3 class="nav-text">Students List</h3>
        </nav>
        
         <!-- Search Bar -->
        <div class="search-bar">
            <div class="row">
                {% block filter %}
                <form class="col-filter col-4 dropdown float-right" method="Post" action="">
                    <select id="sortName" onchange="sort()">
                        <option>--Sort Name By--</option>
                        <option value="asc">Ascending</option>
                        <option value="dsc">Descending</option>
                    </select>
                </form>
                <div class="col-filter col-4 dropdown float-right">
                    <select id="class" onchange="selectClass()">
                        <option>--Select Class--</option>
                        <option value="1">Class 01</option>
                        <option value="2">Class 02</option>
                        <option value="3">Class 03</option>
                        <option value="4">Class 04</option>
                        <option value="5">Class 05</option>
                        <option value="6">Class 06</option>
                        <option value="7">Class 07</option>
                        <option value="8">Class 08</option>
                        <option value="9">Class 09</option>
                        <option value="10">Class 10</option>
                    </select>
                </div>
                {% endblock %}
                <form method="get" action="{% url 'students:search_results'%}" class="col-search col-4">
                     <div class="input-group mb-3"> 
                        <input type="text" class="form-control" placeholder="Search by name" name="query" id="query">
                        <div class="input-group-append">
                            <button class="btn btn-primary" type="submit"><i class="fas fa-search"></i></button>
                        </div>
                </form>
                </div>
            </div>
        </div>

        {% block content %}
        
         <!-- List Of Students -->
        <ul class="cards">
        {% for student in students %}
        <li class="cards__item">
            <div class="card">
            <div class="card__image">
                <img src="https://picsum.photos/200/200" class="rounded-circle">
            </div>
            <div class="card__content">
                <div class="card__title">{{ student.first_name }} {{ student.last_name}}</div>
                <p class="card__text">Class {{ student.school_class }}</p>
            </div>
            </div>
        </li>
        {% endfor %}
        </ul>

        {% endblock %}


    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
       function selectClass() {
           let x = document.getElementById("class").value;
           var url = window.location.href
            if (x != "--Select Class--")
                {
                    var new_url = url.split('/')[2] + '/' + url.split('/')[3] + '/select/' + x
                    console.log(url)
                    console.log(new_url)
                }  
           }

        function sort() {
           let x = document.getElementById("sortName").value;
           var url = window.location.href
            if (x != "--Sort Name By--")
                {
                   let new_url = url.split('/')[2] + '/' + url.split('/')[3] + '/sort_by/' + x
                   url = new_url
                   location.assign(url)               
                }  
           }
    </script> 
    </body>
</html>